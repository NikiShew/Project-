function calcCartPrice(){let e=document.querySelectorAll(".koshik_item"),t=document.querySelector(".total_price"),n=document.querySelector(".header_cost"),r=0;e.forEach((function(e){const t=e.querySelector(".counterNum"),n=e.querySelector(".tsina"),i=parseInt(t.innerText)*parseInt(n.innerText);r+=i})),localStorage.setItem("data",r),t.innerText=localStorage.getItem("data"),n.innerText=localStorage.getItem("data")}let koshik=document.querySelector(".tovar_info"),allKoshik=document.querySelector(".koshik"),plus=document.querySelector('[data-action="plus"]'),minus=document.querySelector('[data-action="minus"]'),counter=document.querySelector(".counterNum");function addProduct(e){const t=localStorage.getItem("card-products"),n=t?JSON.parse(t):[];n.push(e),console.log(n),localStorage.setItem("card-products",JSON.stringify(n))}function addProduct(e){localStorage.setItem("id",e.id),localStorage.setItem("imgSrc",e.imgSrc),localStorage.setItem("title",e.title),localStorage.setItem("zina",e.price)}function l(e){if(e.target.hasAttribute("data-cart")){const t=e.target.closest(".slide_block"),n={id:t.dataset.id,imgSrc:t.querySelector(".slide_block_img").getAttribute("src"),title:t.querySelector(".slide_title").innerText,price:t.querySelector(".stoimost").innerText};l(n);n.id;let r=allKoshik.querySelector(`[data-id="${n.id}"]`);if(r){const e=r.querySelector(".counterNum");e.innerText=parseInt(e.innerText)+1}else{const e=`\n        <div class="koshik_item" data-id="${n.id}">\n        <div class="tovar_name">${n.title}</div>\n        <div class="koshik_img_and_info">\n        <div class="tovar_information">\n            <div class="tovar_image">\n                <img src="${n.imgSrc}" alt="">\n            </div>\n            <div class="product">\n                <div class="tsina">${n.price}</div>\n                <h3 class="tsina_za">Ціна за 5 л </h3>\n                <h3 class="tsina_za">\n                <h2 class="virod">Виробник: ФМС Україна</h2>\n            </div>\n            \n        </div>\n        \n        <div class="tovar_counter">\n            <h2 class="kil-st">Кількість</h2>\n            <button class="counterMinus cnr" data-action="minus">-</button>\n            <h2 class="counterNum">1</h2>\n            <button class="counterPlus cnr" data-action="plus">+</button>\n        </div>\n        \n        </div>\n        \n        </div>\n        \n    </div>\n    \n\n        `;koshik.insertAdjacentHTML("beforeend",e)}toggleCartStatus(),calcCartPrice()}}window.addEventListener("click",(function(e){if(e.target.hasAttribute("data-cart")){const t=e.target.closest(".slide_block"),n={id:t.dataset.id,imgSrc:t.querySelector(".slide_block_img").getAttribute("src"),title:t.querySelector(".slide_title").innerText,price:t.querySelector(".stoimost").innerText};addProduct(n);n.id;let r=allKoshik.querySelector(`[data-id="${n.id}"]`);if(r){const e=r.querySelector(".counterNum");e.innerText=parseInt(e.innerText)+1}else{const e=`\n        <div class="koshik_item" data-id="${n.id}">\n        <div class="tovar_name">${n.title}</div>\n        <div class="koshik_img_and_info">\n        <div class="tovar_information">\n            <div class="tovar_image">\n                <img src="${n.imgSrc}" alt="">\n            </div>\n            <div class="product">\n                <div class="tsina">${n.price}</div>\n                <h3 class="tsina_za">Ціна за 5 л </h3>\n                <h3 class="tsina_za">\n                <h2 class="virod">Виробник: ФМС Україна</h2>\n            </div>\n            \n        </div>\n        \n        <div class="tovar_counter">\n            <h2 class="kil-st">Кількість</h2>\n            <button class="counterMinus cnr" data-action="minus">-</button>\n            <h2 class="counterNum">1</h2>\n            <button class="counterPlus cnr" data-action="plus">+</button>\n        </div>\n        \n        </div>\n        \n        </div>\n        \n    </div>\n    \n\n        `;koshik.insertAdjacentHTML("beforeend",e)}toggleCartStatus(),calcCartPrice()}})),window.addEventListener("click",(function(){let e;if("plus"===event.target.dataset.action||"minus"===event.target.dataset.action){e=event.target.closest(".tovar_counter").querySelector(".counterNum")}"plus"===event.target.dataset.action&&(e.innerText=++e.innerText),"minus"===event.target.dataset.action&&(e.innerText>1?e.innerText=--e.innerText:event.target.closest(".koshik__conteiner")&&1===parseInt(e.innerText)&&(event.target.closest(".koshik_item").remove(),toggleCartStatus(),calcCartPrice())),event.target.hasAttribute("data-action")&&event.target.closest(".tovar_info")&&calcCartPrice()}));const products=[{id:1,srcImg:"img/slide_pet.png",name:"Петунія Софістика F1",price:20},{id:2,srcImg:"img/slide_skor2.png",name:"Скор 250 ЕС к.э.",price:200},{id:3,srcImg:"img/slide_skor.png",name:"Скор 250 ЕС к.э.",price:589},{id:4,srcImg:"img/slide_pet2.png",name:"Петунія Софістика F1",price:20},{id:5,srcImg:"img/slide_pet.png",name:"Петунія Софістика F1",price:400},{id:6,srcImg:"img/slide_pet2.png",name:"Петунія Софістика F1",price:589},{id:7,srcImg:"img/slide_skor2.png",name:"Скор 250 ЕС к.э.",price:200},{id:8,srcImg:"img/slide_pet.png",name:"Петунія Софістика F1",price:110},{id:9,srcImg:"img/slide_pet2.png",name:"Петунія Софістика F1",price:340},{id:10,srcImg:"img/slide_pet.png",name:"Шевченська Софістика F1",price:4220},{id:11,srcImg:"img/slide_pet.png",name:"Петунія Софістика F1",price:83},{id:12,srcImg:"img/slide_skor.png",name:"Скор 250 ЕС к.э.1",price:534},{id:13,srcImg:"img/slide_skor2.png",name:"Скор 250 ЕС к.э.",price:200},{id:14,srcImg:"img/slide_pet.png",name:"Петунія Софістика F1",price:3400},{id:15,srcImg:"img/slide_skor.png",name:"Шевченська Софістика F1",price:2400},{id:16,srcImg:"img/slide_pet2.png",name:"Петунія Софістика F1",price:183},{id:17,srcImg:"img/slide_pet.png",name:"Петунія Софістика F1",price:460},{id:18,srcImg:"img/slide_pet2.png",name:"Скор 250 ЕС к.э.",price:2200},{id:19,srcImg:"img/slide_skor2.png",name:"Скор 250 ЕС к.э.",price:200},{id:20,srcImg:"img/slide_pet.png",name:"Шевченська Софістика F5",price:230},{id:21,srcImg:"img/slide_pet2.png",name:"Петунія Софістика F23",price:1183},{id:22,srcImg:"img/slide_pet.png",name:"Шевченська Софістика F1",price:4060},{id:23,srcImg:"img/slide_pet.png",name:"Петунія Софістика F1",price:22},{id:24,srcImg:"img/slide_skor.png",name:"Скор 250 ЕС к.э.",price:590}],swiperSlider=document.querySelector(".swiper-slide"),tovar_info=document.querySelector(".tovar_info");let oform_tovar=document.querySelector(".oform_tovar"),totalPrice=document.querySelector(".total_price"),monitorPrice=document.querySelector(".header_cost"),productInCart=[];const pricesArrays=[];function deleteCartIn(){productInCart.findIndex((e=>e.id===dataId))}function clearer(){if(4==tovar_info.childNodes.length){localStorage.clear();document.querySelector(".tovar_info");const e=document.querySelector(".koshik_pust"),t=document.querySelector(".koshik_buttons");e.style.display="flex",t.classList.add("none"),t.style.display="none"}}function addToCart(){let e=localStorage.getItem("id");pricesArrays.push(localStorage.getItem("price"));const t=document.createElement("div");t.classList.add("oform_tovares"),tovar_info.appendChild(t);let n=document.createElement("div");n.classList.add("tovar_oform_img"),t.appendChild(n);let r=document.createElement("IMG");r.src=localStorage.getItem("img"),n.appendChild(r);const i=document.createElement("div");i.classList.add("tovar_oform_info"),t.appendChild(i);const o=document.createElement("h3");o.innerText=localStorage.getItem("name"),o.classList.add("tovar_oform_name"),i.appendChild(o);const c=document.createElement("div");c.classList.add("tovars_zinaAndKol_vo"),i.appendChild(c);const a=document.createElement("h3");a.classList.add("tovar_oform_zina"),a.innerText=`цена - ${localStorage.getItem("price")}`,c.appendChild(a);const s=document.createElement("button");return s.classList.add("deleteCartBtn"),s.innerText="Убрать",s.addEventListener("click",(function(){clearer(),deleteCartIn(e),t.remove(),pricesArrays.pop(localStorage.getItem("price")),console.log(pricesArrays),arraySum(pricesArrays),indess(products)})),c.appendChild(s),arraySum(pricesArrays),t}function arraySum(e){let t=0;for(let n=0;n<e.length;n++)t+=+e[n];return monitorPrice.innerText=t,totalPrice.innerText=t,t}const productsCopy=[...products];function createProductContainer(e){const t=document.createElement("div");t.classList.add("slide_block"),swiperSlider.appendChild(t);const n=document.createElement("IMG");n.src=e.srcImg,n.classList.add("slide_block_img"),t.appendChild(n);const r=document.createElement("h2");r.innerText=e.name,r.classList.add("slide_title"),t.appendChild(r);const i=document.createElement("div");i.classList.add("basckets_slide"),t.appendChild(i);const o=document.createElement("h2");o.innerText=`Цiна - ${e.price} грн`,o.classList.add("stoimost"),i.appendChild(o);const c=document.createElement("div");c.classList.add("basket_icon"),i.appendChild(c);const a=document.createElement("button");return a.setAttribute("type","button"),a.innerText="У кошик",a.classList.add("plus"),c.appendChild(a),a.addEventListener("click",(function(){console.log(`цена: ${e.price}, название: ${e.name}, id: ${e.id}`),localStorage.setItem("id",e.id),localStorage.setItem("img",e.srcImg),localStorage.setItem("name",e.name),localStorage.setItem("price",e.price),addToCart(),toggleCartStatus(),addProductToCartArray()})),t}function toggleCartStatus(){let e=document.querySelector(".tovar_info");const t=document.querySelector(".koshik_pust"),n=document.querySelector(".koshik_buttons");e.children.length>0?(console.log("full"),t.style.display="none",n.classList.remove("none"),n.style.display="flex"):(t.style.display="flex",n.classList.add("none"),n.style.display="none")}function addProductToCartArray(){productInCart.push({id:localStorage.getItem("id"),name:localStorage.getItem("name"),price:localStorage.getItem("price"),srcImg:localStorage.getItem("img")}),console.log(productInCart),localStorage.setItem("cards",JSON.stringify(productInCart))}products.forEach((function(e){createProductContainer(e)}));let buyBtn=document.querySelector(".pokupka_btn"),srcI=localStorage.getItem("imgSrc"),title=localStorage.getItem("title"),zina=localStorage.getItem("zina"),aa=localStorage.getItem("card-products"),vb=JSON.parse(aa);const getName=[];let fd=localStorage.getItem("cards"),ss=JSON.parse(fd);const bigConteiner=document.querySelector(".allTovars");buyBtn.onclick=function(){0==bigConteiner.childNodes.length&&(this.setAttribute("href","#"),alert("У кошику пусто"))},window.addEventListener("load",renderOform);let header_cost=document.querySelector(".header_cost"),oformPrice=document.querySelector(".zinas");function renderOform(){const e=[];for(let t=0;t<=ss.length-1;t++){e.push(ss[t].price);const n=document.createElement("div");n.classList.add("oform_tovar"),bigConteiner.appendChild(n);const r=document.createElement("img");r.src=ss[t].srcImg,n.appendChild(r);const i=document.createElement("div");i.classList.add("tovar_oform_info"),n.appendChild(i);const o=document.createElement("h3");o.classList.add("tovar_oform_name"),o.innerText=ss[t].name,i.appendChild(o);const c=document.createElement("div");c.classList.add("tovars_zinaAndKol_vo"),n.appendChild(c);const a=document.createElement("h3");a.classList.add("tovar_oform_zina"),a.innerText=`${ss[t].price} грн`,c.appendChild(a);const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add("delBtn"),s.innerHTML="Убрать",s.addEventListener("click",(function(){n.style.display="none",n.remove(),e.pop(ss[t].price),arraySum(e)})),c.appendChild(s),arraySum(e)}}function arraySum(e){let t=0;for(let n=0;n<e.length;n++)t+=+e[n];return header_cost.innerText=t,oformPrice.innerText=t,t}let popup=document.querySelector(".popup"),koshikdada=document.querySelector(".koshik"),active=document.querySelector(".active"),block=document.querySelector(".hover-block"),close=document.querySelector(".close"),basket=document.querySelector(".header_bsket"),filterbtn=document.querySelector(".filter_block"),virob=document.querySelector(".virobnikf"),virob2=document.querySelector(".virobniks"),kil=document.querySelector(".kil-st"),bb1=document.querySelector(".oform_btn");close.addEventListener("click",(function(){koshikdada.classList.add("none"),document.body.classList.remove("lock")})),basket.addEventListener("click",(function(){koshikdada.classList.remove("none"),document.body.classList.add("lock")}));let btn=document.querySelector(".burger").onclick=function(){popup.classList.toggle("open"),this.classList.toggle("teg"),document.body.classList.toggle("lock")};function toggleCartStatus(){let e=document.querySelector(".tovar_info");const t=document.querySelector(".koshik_pust"),n=document.querySelector(".koshik_buttons");e.children.length>0?(console.log("full"),t.style.display="none",n.classList.remove("none"),n.style.display="flex"):(t.style.display="flex",n.classList.add("none"),n.style.display="none")}active.addEventListener("click",(function(){window.innerWidth>=1107||(block.classList.toggle("activate"),active.classList.toggle("borRad"))})),active.onclick=function(){this.setAttribute("href","#")};let a=document.querySelector(".a");a.addEventListener("click",(function(){window.scrollTo(0,0)})),window.addEventListener("scroll",(function(){let e=window.pageYOffset;e>=500?a.classList.add("activities"):e<=500&&a.classList.remove("activities")}));let a22=document.querySelector(".sortBtn1"),b=document.querySelector(".sortBtn2");function mySort(){let e=document.querySelector(".cotalog-tovars");for(let t=0;t<e.children.length;t++)for(let n=t;n<e.children.length;n++)+e.children[t].getAttribute("data-price")>+e.children[n].getAttribute("data-price")&&(replaceNode=e.replaceChild(e.children[n],e.children[t]),insertAfter(replaceNode,e.children[t]))}function mySortDesk(){let e=document.querySelector(".cotalog-tovars");for(let t=0;t<e.children.length;t++)for(let n=t;n<e.children.length;n++)+e.children[t].getAttribute("data-price")<+e.children[n].getAttribute("data-price")&&(replaceNode=e.replaceChild(e.children[n],e.children[t]),insertAfter(replaceNode,e.children[t]))}function insertAfter(e,t){return t.parentNode.insertBefore(e,t.nextSibling)}a22.addEventListener("click",mySort),b.addEventListener("click",mySortDesk);let a1=document.querySelector(".a1");a1.addEventListener("click",(function(){window.scrollTo(0,0)})),window.addEventListener("scroll",(function(){let e=window.pageYOffset;e>=500?a1.classList.add("activities"):e<=300&&a1.classList.remove("activities")}));